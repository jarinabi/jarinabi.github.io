<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saku Santri Mockup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .role-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .dashboard-section {
            display: none;
            margin-top: 80px;
        }
        .card-icon {
            font-size: 2.5rem;
            opacity: 0.7;
        }
        .santri-photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
        }
        .transaction-item {
            border-left: 4px solid;
            padding-left: 10px;
            margin-bottom: 10px;
        }
        .transaction-item.belanja { border-color: #dc3545; }
        .transaction-item.potongan { border-color: #fd7e14; }
        .transaction-item.bonus { border-color: #198754; }
        .transaction-item.topup { border-color: #0d6efd; }
        .transaction-date {
            font-size: 0.8rem;
            color: #6c757d;
        }
        .item-list {
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }
        .wali-info {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- Role Switcher -->
    <div class="role-badge">
        <select class="form-select" id="roleSelector">
            <option value="superadmin">Super Admin</option>
            <option value="kantin">Admin Kantin</option>
            <option value="wali">Wali Santri</option>
        </select>
    </div>

    <!-- Super Admin Dashboard -->
    <div class="dashboard-section container" id="superadmin">
        <h2 class="mb-4"><span class="material-icons">admin_panel_settings</span> Super Admin</h2>
        
        <div class="row mb-4">
            <div class="col-md-6">
                <select class="form-select" id="santriSelector">
                    <option selected>Pilih Santri</option>
                    <option value="1">Abdul Rahman (NIS: 2023001)</option>
                    <option value="2">Siti Aisyah (NIS: 2023002)</option>
                    <option value="3">Muhammad Faisal (NIS: 2023003)</option>
                </select>
            </div>
        </div>
        
        <!-- Santri Data Section -->
        <div class="row" id="santriData">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body text-center">
                        <img src="https://via.placeholder.com/100" class="santri-photo mb-3" alt="Foto Santri">
                        <h5 id="santriName">-</h5>
                        <p>NIS: <span id="santriNIS">-</span></p>
                        <div class="alert alert-success">
                            <h4>Saldo: <span id="santriSaldo">Rp 0</span></h4>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Data Wali Santri</h5>
                        <div class="wali-info">
                            <p><strong>Nama Wali:</strong> <span id="waliName">-</span></p>
                            <p><strong>Email:</strong> <span id="waliEmail">-</span></p>
                            <p><strong>No. HP:</strong> <span id="waliPhone">-</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Kelola Saldo</h5>
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input type="number" class="form-control" placeholder="Jumlah" id="saldoAmount">
                                    <button class="btn btn-outline-primary" type="button" id="updateSaldo">Update Saldo</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                    <input type="number" class="form-control" placeholder="Jumlah Top Up" id="topupAmount">
                                    <button class="btn btn-primary" type="button" id="processTopup">Top Up</button>
                                </div>
                            </div>
                        </div>
                        
                        <h5 class="card-title">Riwayat Transaksi</h5>
                        <ul class="nav nav-tabs" id="adminTransactionTabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab" href="#adminBelanja">Belanja</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#adminPotongan">Potongan</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#adminBonus">Bonus</a>
                            </li>
                        </ul>
                        
                        <div class="tab-content mt-3">
                            <div class="tab-pane fade show active" id="adminBelanja">
                                <!-- Belanja items will be loaded here -->
                                <div class="text-muted">Pilih santri untuk melihat riwayat</div>
                            </div>
                            <div class="tab-pane fade" id="adminPotongan">
                                <!-- Potongan items will be loaded here -->
                                <div class="text-muted">Pilih santri untuk melihat riwayat</div>
                            </div>
                            <div class="tab-pane fade" id="adminBonus">
                                <!-- Bonus items will be loaded here -->
                                <div class="text-muted">Pilih santri untuk melihat riwayat</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Kantin Dashboard -->
    <div class="dashboard-section container" id="kantin">
        <h2 class="mb-4"><span class="material-icons">store</span> Admin Kantin</h2>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Transaksi Baru</h5>
                        <form id="transactionForm">
                            <div class="mb-3">
                                <label class="form-label">Santri</label>
                                <select class="form-select" id="kantinSantriSelect">
                                    <option selected>Pilih Santri</option>
                                    <option value="1">Abdul Rahman (NIS: 2023001)</option>
                                    <option value="2">Siti Aisyah (NIS: 2023002)</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Tanggal</label>
                                <input type="date" class="form-control" value="2023-11-15" id="transactionDate">
                            </div>
                            
                            <div id="itemContainer">
                                <div class="item-list">
                                    <div class="row g-2 mb-2">
                                        <div class="col-md-6">
                                            <input type="text" class="form-control item-name" placeholder="Nama Item">
                                        </div>
                                        <div class="col-md-3">
                                            <input type="number" class="form-control item-qty" placeholder="Qty">
                                        </div>
                                        <div class="col-md-3">
                                            <input type="number" class="form-control item-price" placeholder="Harga">
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-sm btn-outline-danger remove-item">
                                        <span class="material-icons">delete</span> Hapus
                                    </button>
                                </div>
                            </div>
                            
                            <button type="button" class="btn btn-sm btn-outline-primary mb-3" id="addItem">
                                <span class="material-icons">add</span> Tambah Item
                            </button>
                            
                            <div class="alert alert-info">
                                Total: <strong id="transactionTotal">Rp 0</strong>
                            </div>
                            <button type="button" class="btn btn-primary w-100" id="saveTransaction">Simpan Transaksi</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Riwayat Transaksi Hari Ini</h5>
                        <div class="list-group" id="todayTransactions">
                            <div class="list-group-item d-flex justify-content-between">
                                <div>
                                    <div class="fw-bold">Abdul Rahman</div>
                                    <div>2x Roti, 1x Teh Botol</div>
                                    <small class="text-muted">15 Nov 2023 08:30</small>
                                </div>
                                <div class="text-danger">Rp 15.000</div>
                            </div>
                            <div class="list-group-item d-flex justify-content-between">
                                <div>
                                    <div class="fw-bold">Siti Aisyah</div>
                                    <div>1x Nasi Goreng</div>
                                    <small class="text-muted">15 Nov 2023 12:00</small>
                                </div>
                                <div class="text-danger">Rp 15.000</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Wali Santri Dashboard -->
    <div class="dashboard-section container" id="wali">
        <h2 class="mb-4"><span class="material-icons">family_restroom</span> Wali Santri</h2>
        
        <div class="row">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-body text-center">
                        <img src="https://via.placeholder.com/100" class="santri-photo mb-3" alt="Foto Santri">
                        <h5 id="waliSantriName">Abdul Rahman</h5>
                        <p>NIS: <span id="waliSantriNIS">2023001</span></p>
                        <div class="alert alert-success">
                            <h4>Saldo: <span id="waliSantriSaldo">Rp 150.000</span></h4>
                        </div>
                        
                        <div class="wali-info text-start">
                            <h6>Data Wali:</h6>
                            <p><strong>Nama:</strong> Ahmad Fauzi</p>
                            <p><strong>Email:</strong> ahmad.fauzi@example.com</p>
                            <p><strong>No. HP:</strong> 081234567890</p>
                        </div>
                        
                        <div class="d-grid gap-2 mt-3">
                            <button class="btn btn-outline-primary">
                                <span class="material-icons">history</span> Riwayat Lengkap
                            </button>
                            <button class="btn btn-outline-secondary">
                                <span class="material-icons">download</span> Export PDF
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Catatan Transaksi</h5>
                        <ul class="nav nav-tabs" id="transactionTabs">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab" href="#belanja">Belanja</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#potongan">Potongan</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#bonus">Bonus</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#topup">Top Up</a>
                            </li>
                        </ul>
                        
                        <div class="tab-content mt-3">
                            <div class="tab-pane fade show active" id="belanja">
                                <div class="transaction-item belanja">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>2x Roti, 1x Teh Botol</strong>
                                            <div class="transaction-date">15 Nov 2023 08:30</div>
                                            <small>Kantin Pondok</small>
                                        </div>
                                        <div class="text-danger">- Rp 15.000</div>
                                    </div>
                                </div>
                                <div class="transaction-item belanja">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>1x Nasi Goreng</strong>
                                            <div class="transaction-date">15 Nov 2023 12:00</div>
                                            <small>Kantin Sekolah</small>
                                        </div>
                                        <div class="text-danger">- Rp 15.000</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="potongan">
                                <div class="transaction-item potongan">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>Potongan Rutin - SPP</strong>
                                            <div class="transaction-date">10 Nov 2023</div>
                                            <small>Pembayaran SPP bulan November</small>
                                        </div>
                                        <div class="text-warning">- Rp 50.000</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="bonus">
                                <div class="transaction-item bonus">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>Bonus Prestasi</strong>
                                            <div class="transaction-date">8 Nov 2023</div>
                                            <small>Juara 1 Lomba Pidato</small>
                                        </div>
                                        <div class="text-success">+ Rp 25.000</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="topup">
                                <div class="transaction-item topup">
                                    <div class="d-flex justify-content-between">
                                        <div>
                                            <strong>Top Up Saldo</strong>
                                            <div class="transaction-date">1 Nov 2023</div>
                                            <small>Transfer Bank BCA</small>
                                        </div>
                                        <div class="text-success">+ Rp 200.000</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample data
        const santriData = {
            '1': {
                name: 'Abdul Rahman',
                nis: '2023001',
                saldo: 250000,
                wali: {
                    name: 'Ahmad Fauzi',
                    email: 'ahmad.fauzi@example.com',
                    phone: '081234567890'
                },
                transactions: {
                    belanja: [
                        { items: '2x Roti, 1x Teh Botol', date: '15 Nov 2023 08:30', amount: 15000, note: 'Kantin Pondok' },
                        { items: '1x Nasi Goreng', date: '15 Nov 2023 12:00', amount: 15000, note: 'Kantin Sekolah' }
                    ],
                    potongan: [
                        { type: 'Potongan Rutin - SPP', date: '10 Nov 2023', amount: 50000, note: 'Pembayaran SPP bulan November' }
                    ],
                    bonus: [
                        { type: 'Bonus Prestasi', date: '8 Nov 2023', amount: 25000, note: 'Juara 1 Lomba Pidato' }
                    ],
                    topup: [
                        { type: 'Top Up Saldo', date: '1 Nov 2023', amount: 200000, note: 'Transfer Bank BCA' }
                    ]
                }
            },
            '2': {
                name: 'Siti Aisyah',
                nis: '2023002',
                saldo: 180000,
                wali: {
                    name: 'Budi Santoso',
                    email: 'budi.santoso@example.com',
                    phone: '082345678901'
                },
                transactions: {
                    belanja: [
                        { items: '1x Mie Goreng', date: '14 Nov 2023 10:15', amount: 8000, note: 'Kantin Sekolah' }
                    ],
                    potongan: [
                        { type: 'Potongan Khusus - Buku', date: '5 Nov 2023', amount: 35000, note: 'Pembelian buku pelajaran' }
                    ],
                    bonus: [],
                    topup: [
                        { type: 'Top Up Saldo', date: '3 Nov 2023', amount: 150000, note: 'Transfer Bank BRI' }
                    ]
                }
            }
        };

        // Role switching logic
        const roleSelector = document.getElementById('roleSelector');
        const sections = document.querySelectorAll('.dashboard-section');

        roleSelector.addEventListener('change', (e) => {
            sections.forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(e.target.value).style.display = 'block';
        });

        // Show initial role
        document.getElementById('superadmin').style.display = 'block';

        // Santri selection in Super Admin
        const santriSelector = document.getElementById('santriSelector');
        santriSelector.addEventListener('change', function() {
            const selectedSantri = santriData[this.value];
            if (selectedSantri) {
                document.getElementById('santriName').textContent = selectedSantri.name;
                document.getElementById('santriNIS').textContent = selectedSantri.nis;
                document.getElementById('santriSaldo').textContent = `Rp ${selectedSantri.saldo.toLocaleString('id-ID')}`;
                
                // Update wali info
                document.getElementById('waliName').textContent = selectedSantri.wali.name;
                document.getElementById('waliEmail').textContent = selectedSantri.wali.email;
                document.getElementById('waliPhone').textContent = selectedSantri.wali.phone;
                
                // Update transaction history
                updateTransactionHistory('adminBelanja', selectedSantri.transactions.belanja, 'belanja');
                updateTransactionHistory('adminPotongan', selectedSantri.transactions.potongan, 'potongan');
                updateTransactionHistory('adminBonus', selectedSantri.transactions.bonus, 'bonus');
            }
        });

        function updateTransactionHistory(containerId, transactions, type) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            if (transactions.length === 0) {
                container.innerHTML = '<div class="text-muted">Tidak ada transaksi</div>';
                return;
            }
            
            transactions.forEach(trans => {
                const item = document.createElement('div');
                item.className = `transaction-item ${type}`;
                
                let content = '';
                if (type === 'belanja') {
                    content = `
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong>${trans.items}</strong>
                                <div class="transaction-date">${trans.date}</div>
                                ${trans.note ? `<small>${trans.note}</small>` : ''}
                            </div>
                            <div class="text-danger">- Rp ${trans.amount.toLocaleString('id-ID')}</div>
                        </div>
                    `;
                } else {
                    content = `
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong>${trans.type}</strong>
                                <div class="transaction-date">${trans.date}</div>
                                ${trans.note ? `<small>${trans.note}</small>` : ''}
                            </div>
                            <div class="${type === 'bonus' || type === 'topup' ? 'text-success' : 'text-warning'}">
                                ${type === 'bonus' || type === 'topup' ? '+' : '-'} Rp ${trans.amount.toLocaleString('id-ID')}
                            </div>
                        </div>
                    `;
                }
                
                item.innerHTML = content;
                container.appendChild(item);
            });
        }

        // Kantin transaction logic
        let itemCounter = 1;
        
        document.getElementById('addItem').addEventListener('click', function() {
            const itemContainer = document.getElementById('itemContainer');
            const newItem = document.createElement('div');
            newItem.className = 'item-list';
            newItem.innerHTML = `
                <div class="row g-2 mb-2">
                    <div class="col-md-6">
                        <input type="text" class="form-control item-name" placeholder="Nama Item">
                    </div>
                    <div class="col-md-3">
                        <input type="number" class="form-control item-qty" placeholder="Qty">
                    </div>
                    <div class="col-md-3">
                        <input type="number" class="form-control item-price" placeholder="Harga">
                    </div>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger remove-item">
                    <span class="material-icons">delete</span> Hapus
                </button>
            `;
            itemContainer.appendChild(newItem);
            
            // Add event listeners to new inputs
            const inputs = newItem.querySelectorAll('.item-qty, .item-price');
            inputs.forEach(input => {
                input.addEventListener('input', calculateTotal);
            });
            
            // Add remove event
            newItem.querySelector('.remove-item').addEventListener('click', function() {
                itemContainer.removeChild(newItem);
                calculateTotal();
            });
            
            itemCounter++;
        });

        // Calculate total transaction
        function calculateTotal() {
            let total = 0;
            const itemLists = document.querySelectorAll('.item-list');
            
            itemLists.forEach(item => {
                const qty = parseInt(item.querySelector('.item-qty').value) || 0;
                const price = parseInt(item.querySelector('.item-price').value) || 0;
                total += qty * price;
            });
            
            document.getElementById('transactionTotal').textContent = `Rp ${total.toLocaleString('id-ID')}`;
        }

        // Add event listeners to initial inputs
        document.querySelectorAll('.item-qty, .item-price').forEach(input => {
            input.addEventListener('input', calculateTotal);
        });

        // Remove item event delegation
        document.getElementById('itemContainer').addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-item') || e.target.closest('.remove-item')) {
                const itemList = e.target.closest('.item-list');
                if (itemList && document.querySelectorAll('.item-list').length > 1) {
                    itemList.remove();
                    calculateTotal();
                }
            }
        });

        // Save transaction
        document.getElementById('saveTransaction').addEventListener('click', function() {
            alert('Transaksi berhasil disimpan!');
            // In a real app, this would send data to the server
        });
    </script>
</body>
</html>